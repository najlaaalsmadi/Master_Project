<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>أيديا ميديا - تسجيل الدخول</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="/frontend/user/css/AllEvents.css" />
    <link rel="stylesheet" href="/frontend/user/css/index.css" />
    <link rel="stylesheet" href="/frontend/user/css/loginAndSingup.css" />
  </head>
  <body>
    <div class="top-bar">
      <div class="container d-flex justify-content-between flex-wrap">
        <div class="top-bar-left">
          <i class="fas fa-map-marker-alt"></i> الأردن، عجلون
          <i class="fas fa-envelope ms-3"></i> Ideamedia@gmail.com
        </div>
        <div class="top-bar-right d-flex align-items-center">
          <i class="fas fa-phone"></i>
          <a href="tel:+962791234567" class="text-ligth text-decoration-none"
            >0777956583</a
          >
          <span class="ms-3">تابعنا على:</span>
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-whatsapp"></i></a>
          <a href="#"><i class="fab fa-linkedin-in"></i></a>
          <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
    </div>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand" href="#">
          <span class="idea">أيديا</span>
          <span class="media">ميديا</span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span><i class="fas fa-bars" style="color: orange"></i></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="/frontend/user/Index.html">الرئيسية</a>
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="coursesDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                أقسام الدورات
              </a>
              <ul
                id="categoriesDropdown"
                class="dropdown-menu"
                aria-labelledby="coursesDropdown"
              >
                <!-- سيتم إضافة الأقسام هنا -->
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="storeDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                أقسام المتجر
              </a>
              <ul class="dropdown-menu" aria-labelledby="storeDropdown">
                <li>
                  <a
                    class="dropdown-item"
                    href="/frontend/user/equipmentshop.html"
                    >متجر معدات</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    href="/frontend/user/HandmadeShop.html"
                    >متجر منتجات يدوية</a
                  >
                </li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="storeDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                اداره الاحداث
              </a>
              <ul class="dropdown-menu" aria-labelledby="storeDropdown">
                <li>
                  <a class="dropdown-item" href="/frontend/user/postEvents.html"
                    >اضافة أحداث
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="/frontend/user/AllEvents.html"
                    >كل الأحداث</a
                  >
                </li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="storeDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                أقسام المدربين
              </a>
              <ul class="dropdown-menu" aria-labelledby="storeDropdown">
                <li>
                  <a
                    class="dropdown-item"
                    href="/frontend/user/singupInstructors.html"
                  >
                    تسجيل كمدرب</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    href="/frontend/user/ALLInstructors.html"
                    >كل المدربين</a
                  >
                </li>
              </ul>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/frontend/user/Contact.html"
                >اتصل بنا</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/frontend/user/about.html">من نحن</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/frontend/admin/loginAdmin.html"
                >لوحة الإدارة</a
              >
            </li>
          </ul>
          <div class="icon-buttons d-flex align-items-center">
            <!-- زر تسجيل الدخول أو تسجيل الخروج بناءً على حالة تسجيل الدخول -->
            <div id="authLinks"></div>
          </div>
        </div>
      </div>
    </nav>
    <!-- Login Section -->
    <main class="p-3">
      <div class="container mt-5">
        <div class="row justify-content-center">
          <div class="col-md-6 form-container bg-white">
            <h2 class="text-center mb-4">إضافة حدث</h2>
            <form id="eventForm" enctype="multipart/form-data">
              <!-- الجزء الأول من النموذج -->
              <div id="eventPart1">
                <div class="border rounded p-3 mb-4">
                  <h4>المعلومات الأساسية</h4>
                  <div class="mb-3">
                    <label for="eventTitle" class="form-label"
                      >عنوان الحدث</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="eventTitle"
                      name="EventTitle"
                      placeholder="ورشة عمل: فنون الخياطة الأساسية"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="eventDate" class="form-label"
                      >تاريخ الحدث</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="eventDate"
                      name="EventDate"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="eventTime" class="form-label">وقت الحدث</label>
                    <input
                      type="time"
                      class="form-control"
                      id="eventTime"
                      name="EventTime"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="location" class="form-label">الموقع</label>
                    <input
                      type="text"
                      class="form-control"
                      id="location"
                      name="Location"
                      placeholder="أدخل الموقع"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="image" class="form-label">صورة الحدث</label>
                    <input
                      type="file"
                      class="form-control"
                      id="image"
                      name="ImagePath"
                      accept="image/*"
                    />
                  </div>
                  <div class="d-grid">
                    <button
                      type="button"
                      class="btn btn-warning"
                      onclick="showEventPart2()"
                    >
                      التالي
                    </button>
                  </div>
                </div>
              </div>

              <!-- الجزء الثاني من النموذج -->
              <div id="eventPart2" style="display: none">
                <div class="border rounded p-3">
                  <h4>التفاصيل</h4>
                  <div class="mb-3">
                    <label for="participants" class="form-label"
                      >عدد المشاركين</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="participants"
                      name="Participants"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="speaker" class="form-label">المتحدث</label>
                    <input
                      type="text"
                      class="form-control"
                      id="speaker"
                      name="Speaker"
                      placeholder="أحمد الخياط"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="summary" class="form-label">ملخص الحدث</label>
                    <textarea
                      class="form-control"
                      id="summary"
                      name="Summary"
                      rows="4"
                      placeholder="ملخص الحدث"
                      required
                    ></textarea>
                  </div>
                  <!-- Additional fields -->
                  <div class="mb-3">
                    <label for="learnings" class="form-label">التعلميات</label>
                    <textarea
                      class="form-control"
                      id="learnings"
                      name="Learnings"
                      rows="2"
                      placeholder="أبرز التعلميات"
                    ></textarea>
                  </div>
                  <div class="mb-3">
                    <label for="features" class="form-label">الميزات</label>
                    <textarea
                      class="form-control"
                      id="features"
                      name="Features"
                      rows="2"
                      placeholder="ميزات إضافية"
                    ></textarea>
                  </div>
                  <div class="mb-3">
                    <label for="seatsAvailable" class="form-label"
                      >المقاعد المتاحة</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="seatsAvailable"
                      name="SeatsAvailable"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="topics" class="form-label">المواضيع</label>
                    <input
                      type="number"
                      class="form-control"
                      id="topics"
                      name="Topics"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="exams" class="form-label">الاختبارات</label>
                    <input
                      type="number"
                      class="form-control"
                      id="exams"
                      name="Exams"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="articles" class="form-label">المقالات</label>
                    <input
                      type="number"
                      class="form-control"
                      id="articles"
                      name="Articles"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="certificates" class="form-label"
                      >الشهادات</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="certificates"
                      name="Certificates"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="mapUrl" class="form-label">رابط الخريطة</label>
                    <input
                      type="text"
                      class="form-control"
                      id="mapUrl"
                      name="MapUrl"
                      placeholder="أدخل رابط الموقع الجغرافي"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="zoomLink" class="form-label">رابط Zoom</label>
                    <input
                      type="text"
                      class="form-control"
                      id="zoomLink"
                      name="ZoomLink"
                      placeholder="أدخل رابط الاجتماع"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="zoomPassword" class="form-label"
                      >كلمة مرور Zoom</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="zoomPassword"
                      name="ZoomPassword"
                      placeholder="أدخل كلمة المرور"
                    />
                  </div>
                  <div class="d-grid">
                    <button type="submit" class="btn btn-warning">
                      إضافة الحدث
                    </button>
                  </div>
                </div>
              </div>
            </form>

            <script>
              function showEventPart2() {
                document.getElementById("eventPart1").style.display = "none";
                document.getElementById("eventPart2").style.display = "block";
              }

              document
                .getElementById("eventForm")
                .addEventListener("submit", function (e) {
                  e.preventDefault();

                  const formData = new FormData(this);

                  const eventDate = new Date(
                    document.getElementById("eventDate").value
                  );
                  const eventTime = document
                    .getElementById("eventTime")
                    .value.split(":");
                  const eventDateTime = new Date(
                    eventDate.setHours(eventTime[0], eventTime[1])
                  );

                  if (eventDateTime <= new Date()) {
                    Swal.fire({
                      title: "خطأ!",
                      text: "يجب أن يكون تاريخ ووقت الحدث في المستقبل.",
                      icon: "error",
                      confirmButtonText: "حسنًا",
                    });
                    return;
                  }

                  fetch("http://localhost:38146/api/Event", {
                    method: "POST",
                    body: formData,
                  })
                    .then((response) => {
                      if (response.ok) {
                        Swal.fire({
                          title: "تم بنجاح!",
                          text: "تم إضافة الحدث بنجاح!",
                          icon: "success",
                          confirmButtonText: "رائع!",
                        });
                        this.reset();
                        document.getElementById("eventPart2").style.display =
                          "none";
                        document.getElementById("eventPart1").style.display =
                          "block";
                      } else {
                        throw new Error("حدث خطأ ما");
                      }
                    })
                    .catch((error) => {
                      Swal.fire({
                        title: "خطأ!",
                        text: "حدثت مشكلة أثناء إضافة الحدث. يرجى المحاولة مرة أخرى.",
                        icon: "error",
                        confirmButtonText: "حسنًا",
                      });
                    });
                });
            </script>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-4 footer-column">
            <h5>معلومات عنا</h5>
            <ul>
              <li><a href="#">قصتنا</a></li>
              <li><a href="#">الرؤية والرسالة</a></li>
              <li><a href="#">فريق العمل</a></li>
              <li><a href="#">الوظائف</a></li>
            </ul>
          </div>
          <div class="col-md-4 footer-column">
            <h5>روابط سريعة</h5>
            <ul>
              <li><a href="#">الرئيسية</a></li>
              <li><a href="#">المتجر</a></li>
              <li><a href="#">الأحداث</a></li>
              <li><a href="#">المدربون</a></li>
            </ul>
          </div>
          <div class="col-md-4 footer-column">
            <h5>تواصل معنا</h5>
            <ul>
              <li><a href="#">اتصل بنا</a></li>
              <li><a href="#">الأسئلة الشائعة</a></li>
              <li><a href="#">الدعم الفني</a></li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom text-center py-3">
          <p>&copy; 2023 أيديا ميديا. جميع الحقوق محفوظة.</p>
        </div>
      </div>
    </footer>
    <!-- تضمين SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="/frontend/user/login.js"></script>

    <!-- تضمين SweetAlert2 (إذا أردت استخدامه لعرض التنبيهات) -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/frontend/user/ALLCategories.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/frontend/user/javascript/ordelogin.js"></script>
    <script src="/frontend/equipmentshopdetails.js"></script>
  </body>
</html>
